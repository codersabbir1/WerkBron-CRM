import React, { useEffect, useState } from "react";
import { Link } from "react-router-dom";
import List from "./features/List";

const SideBar: React.FC = () => {
  const [isSidebarOpen, setIsSidebarOpen] = useState(true);
  const [isMobile, setIsMobile] = useState(window.innerWidth < 1340);

  // Handle screen resize
  useEffect(() => {
    const updateScreenSize = () => {
      const mobileView = window.innerWidth < 1340;
      setIsMobile(mobileView);
      setIsSidebarOpen(!mobileView);
    };

    updateScreenSize(); // Initialize state correctly
    window.addEventListener("resize", updateScreenSize);
    return () => window.removeEventListener("resize", updateScreenSize);
  }, [isMobile]);

  return (
    <aside
      className={`bg-Secondary text-white shadow-md transition-all duration-300 ${
        isSidebarOpen ? "w-[266px]" : "w-14"
      }`}
    >
      <nav className="flex flex-col justify-between h-full">
        <ul className="space-y-2">
          <li className="flex flex-col items-center hover:bg-gray-200 cursor-pointer border-b border-[#4E5976] p-2">
            <Link to="/">
              <img
                className="w-full h-8"
                src={
                  isSidebarOpen
                    ? "/img/Modern-Brand2.png"
                    : "/img/Modern-Brand.png"
                }
                alt=""
              />
            </Link>
          </li>
          <List title={isSidebarOpen ? "Dashboard" : ""}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M6 2H2.66667C2.29848 2 2 2.29848 2 2.66667V6C2 6.36819 2.29848 6.66667 2.66667 6.66667H6C6.36819 6.66667 6.66667 6.36819 6.66667 6V2.66667C6.66667 2.29848 6.36819 2 6 2Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M13.3333 2H10C9.63181 2 9.33333 2.29848 9.33333 2.66667V6C9.33333 6.36819 9.63181 6.66667 10 6.66667H13.3333C13.7015 6.66667 14 6.36819 14 6V2.66667C14 2.29848 13.7015 2 13.3333 2Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M13.3333 9.33333H10C9.63181 9.33333 9.33333 9.63181 9.33333 10V13.3333C9.33333 13.7015 9.63181 14 10 14H13.3333C13.7015 14 14 13.7015 14 13.3333V10C14 9.63181 13.7015 9.33333 13.3333 9.33333Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M6 9.33333H2.66667C2.29848 9.33333 2 9.63181 2 10V13.3333C2 13.7015 2.29848 14 2.66667 14H6C6.36819 14 6.66667 13.7015 6.66667 13.3333V10C6.66667 9.63181 6.36819 9.33333 6 9.33333Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </List>
          <List title={isSidebarOpen ? "Company" : ""}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M5.99996 14.6668V12.0002H9.99996V14.6668M5.33329 4.00016H5.33996M10.6666 4.00016H10.6733M7.99996 4.00016H8.00663M7.99996 6.66683H8.00663M7.99996 9.3335H8.00663M10.6666 6.66683H10.6733M10.6666 9.3335H10.6733M5.33329 6.66683H5.33996M5.33329 9.3335H5.33996M3.99996 1.3335H12C12.7363 1.3335 13.3333 1.93045 13.3333 2.66683V13.3335C13.3333 14.0699 12.7363 14.6668 12 14.6668H3.99996C3.26358 14.6668 2.66663 14.0699 2.66663 13.3335V2.66683C2.66663 1.93045 3.26358 1.3335 3.99996 1.3335Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </List>
          <List title={isSidebarOpen ? "Contact" : ""}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M10.6667 12.0002C10.6667 11.2929 10.3857 10.6146 9.88562 10.1145C9.38552 9.61445 8.70724 9.3335 8 9.3335M8 9.3335C7.29276 9.3335 6.61448 9.61445 6.11438 10.1145C5.61428 10.6146 5.33333 11.2929 5.33333 12.0002M8 9.3335C9.10457 9.3335 10 8.43807 10 7.3335C10 6.22893 9.10457 5.3335 8 5.3335C6.89543 5.3335 6 6.22893 6 7.3335C6 8.43807 6.89543 9.3335 8 9.3335ZM5.33333 1.3335V2.66683M10.6667 1.3335V2.66683M3.33333 2.66683H12.6667C13.403 2.66683 14 3.26378 14 4.00016V13.3335C14 14.0699 13.403 14.6668 12.6667 14.6668H3.33333C2.59695 14.6668 2 14.0699 2 13.3335V4.00016C2 3.26378 2.59695 2.66683 3.33333 2.66683Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </List>
          <List title={isSidebarOpen ? "Vacancy" : ""}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M8.00004 8.00016H8.00671M10.6667 4.00016V2.66683C10.6667 2.31321 10.5262 1.97407 10.2762 1.72402C10.0261 1.47397 9.687 1.3335 9.33337 1.3335H6.66671C6.31309 1.3335 5.97395 1.47397 5.7239 1.72402C5.47385 1.97407 5.33337 2.31321 5.33337 2.66683V4.00016M14.6667 8.66683C12.6886 9.97282 10.3704 10.669 8.00004 10.669C5.62968 10.669 3.31151 9.97282 1.33337 8.66683M2.66671 4.00016H13.3334C14.0698 4.00016 14.6667 4.59712 14.6667 5.3335V12.0002C14.6667 12.7365 14.0698 13.3335 13.3334 13.3335H2.66671C1.93033 13.3335 1.33337 12.7365 1.33337 12.0002V5.3335C1.33337 4.59712 1.93033 4.00016 2.66671 4.00016Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </List>
          <List title={isSidebarOpen ? "Candidate" : ""}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M7.99996 8.66667C9.84091 8.66667 11.3333 7.17428 11.3333 5.33333C11.3333 3.49238 9.84091 2 7.99996 2C6.15901 2 4.66663 3.49238 4.66663 5.33333C4.66663 7.17428 6.15901 8.66667 7.99996 8.66667ZM7.99996 8.66667C9.41445 8.66667 10.771 9.22857 11.7712 10.2288C12.7714 11.229 13.3333 12.5855 13.3333 14M7.99996 8.66667C6.58547 8.66667 5.22892 9.22857 4.22872 10.2288C3.22853 11.229 2.66663 12.5855 2.66663 14"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </List>
          <List title={isSidebarOpen ? "Cashcow" : ""}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M7.33337 11.3332L8.66671 12.6665C8.79803 12.7978 8.95393 12.902 9.12551 12.9731C9.29709 13.0441 9.48099 13.0807 9.66671 13.0807C9.85242 13.0807 10.0363 13.0441 10.2079 12.9731C10.3795 12.902 10.5354 12.7978 10.6667 12.6665C10.798 12.5352 10.9022 12.3793 10.9733 12.2077C11.0443 12.0361 11.0809 11.8522 11.0809 11.6665C11.0809 11.4808 11.0443 11.2969 10.9733 11.1253C10.9022 10.9537 10.798 10.7978 10.6667 10.6665M9.33353 9.33318L11.0002 10.9998C11.2654 11.2651 11.6251 11.4141 12.0002 11.4141C12.3753 11.4141 12.735 11.2651 13.0002 10.9998C13.2654 10.7346 13.4144 10.3749 13.4144 9.99985C13.4144 9.62477 13.2654 9.26506 13.0002 8.99985L10.4135 6.41318C10.0385 6.03865 9.53019 5.82827 9.00019 5.82827C8.47019 5.82827 7.96186 6.03865 7.58686 6.41318L7.00019 6.99985C6.73498 7.26506 6.37526 7.41406 6.00019 7.41406C5.62512 7.41406 5.26541 7.26506 5.00019 6.99985C4.73498 6.73463 4.58598 6.37492 4.58598 5.99985C4.58598 5.62477 4.73498 5.26506 5.00019 4.99985L6.87353 3.12651C7.48169 2.51994 8.27479 2.13355 9.12729 2.0285C9.97978 1.92344 10.843 2.10573 11.5802 2.54651L11.8935 2.73318C12.1774 2.90451 12.5149 2.96393 12.8402 2.89985L14.0002 2.66651M14 1.99984L14.6667 9.33317H13.3334M2.00004 1.99984L1.33337 9.33317L5.66671 13.6665C5.93192 13.9317 6.29163 14.0807 6.66671 14.0807C7.04178 14.0807 7.40149 13.9317 7.66671 13.6665C7.93192 13.4013 8.08092 13.0416 8.08092 12.6665C8.08092 12.2914 7.93192 11.9317 7.66671 11.6665M2.00004 2.6665H7.33337"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </List>
          <List title={isSidebarOpen ? "Invoice" : ""}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M5.33329 8.00016H8.66663M10.6666 6.33356C10.3123 5.91932 9.83952 5.62361 9.312 5.48626C8.78449 5.34892 8.22755 5.37653 7.71621 5.56539C7.20487 5.75424 6.76368 6.09527 6.45208 6.54252C6.14048 6.98978 5.97343 7.52179 5.97343 8.0669C5.97343 8.612 6.14048 9.14401 6.45208 9.59127C6.76368 10.0385 7.20487 10.3795 7.71621 10.5684C8.22755 10.7573 8.78449 10.7849 9.312 10.6475C9.83952 10.5102 10.3123 10.2145 10.6666 9.80023M2.66663 1.3335V14.6668L3.99996 14.0002L5.33329 14.6668L6.66663 14.0002L7.99996 14.6668L9.33329 14.0002L10.6666 14.6668L12 14.0002L13.3333 14.6668V1.3335L12 2.00016L10.6666 1.3335L9.33329 2.00016L7.99996 1.3335L6.66663 2.00016L5.33329 1.3335L3.99996 2.00016L2.66663 1.3335Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </List>
          <List title={isSidebarOpen ? "Mailing" : ""}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M14.6667 4.6665L8.68671 8.4665C8.48089 8.59545 8.24292 8.66384 8.00004 8.66384C7.75716 8.66384 7.51919 8.59545 7.31337 8.4665L1.33337 4.6665M2.66671 2.6665H13.3334C14.0698 2.6665 14.6667 3.26346 14.6667 3.99984V11.9998C14.6667 12.7362 14.0698 13.3332 13.3334 13.3332H2.66671C1.93033 13.3332 1.33337 12.7362 1.33337 11.9998V3.99984C1.33337 3.26346 1.93033 2.6665 2.66671 2.6665Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </List>
          <List title={isSidebarOpen ? "Calendar" : ""}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M5.33333 1.3335V4.00016M10.6667 1.3335V4.00016M2 6.66683H14M3.33333 2.66683H12.6667C13.403 2.66683 14 3.26378 14 4.00016V13.3335C14 14.0699 13.403 14.6668 12.6667 14.6668H3.33333C2.59695 14.6668 2 14.0699 2 13.3335V4.00016C2 3.26378 2.59695 2.66683 3.33333 2.66683Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </List>
          <List title={isSidebarOpen ? "Job Scraper" : ""}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M2 4.66667V3.33333C2 2.97971 2.14048 2.64057 2.39052 2.39052C2.64057 2.14048 2.97971 2 3.33333 2H4.66667M11.3333 2H12.6667C13.0203 2 13.3594 2.14048 13.6095 2.39052C13.8595 2.64057 14 2.97971 14 3.33333V4.66667M14 11.3333V12.6667C14 13.0203 13.8595 13.3594 13.6095 13.6095C13.3594 13.8595 13.0203 14 12.6667 14H11.3333M4.66667 14H3.33333C2.97971 14 2.64057 13.8595 2.39052 13.6095C2.14048 13.3594 2 13.0203 2 12.6667V11.3333M10.6667 10.6667L9.40007 9.40007M10 8C10 9.10457 9.10457 10 8 10C6.89543 10 6 9.10457 6 8C6 6.89543 6.89543 6 8 6C9.10457 6 10 6.89543 10 8Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </List>
        </ul>
        <ul className="space-y-2 border-t border-[#4E5976]">
          <List title={isSidebarOpen ? "Settings" : ""}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
            >
              <path
                d="M8.14667 1.3335H7.85333C7.49971 1.3335 7.16057 1.47397 6.91053 1.72402C6.66048 1.97407 6.52 2.31321 6.52 2.66683V2.78683C6.51976 3.02065 6.45804 3.25029 6.34103 3.45272C6.22401 3.65515 6.05583 3.82325 5.85333 3.94016L5.56667 4.10683C5.36398 4.22385 5.13405 4.28546 4.9 4.28546C4.66595 4.28546 4.43603 4.22385 4.23333 4.10683L4.13333 4.0535C3.82738 3.877 3.46389 3.82913 3.12267 3.92037C2.78145 4.01161 2.49037 4.23452 2.31333 4.54016L2.16667 4.7935C1.99018 5.09945 1.9423 5.46294 2.03354 5.80416C2.12478 6.14539 2.34769 6.43646 2.65333 6.6135L2.75333 6.68016C2.95485 6.7965 3.12241 6.96356 3.23937 7.16472C3.35632 7.36588 3.4186 7.59414 3.42 7.82683V8.16683C3.42093 8.40178 3.35977 8.6328 3.2427 8.8365C3.12563 9.04021 2.95681 9.20936 2.75333 9.32683L2.65333 9.38683C2.34769 9.56386 2.12478 9.85494 2.03354 10.1962C1.9423 10.5374 1.99018 10.9009 2.16667 11.2068L2.31333 11.4602C2.49037 11.7658 2.78145 11.9887 3.12267 12.08C3.46389 12.1712 3.82738 12.1233 4.13333 11.9468L4.23333 11.8935C4.43603 11.7765 4.66595 11.7149 4.9 11.7149C5.13405 11.7149 5.36398 11.7765 5.56667 11.8935L5.85333 12.0602C6.05583 12.1771 6.22401 12.3452 6.34103 12.5476C6.45804 12.75 6.51976 12.9797 6.52 13.2135V13.3335C6.52 13.6871 6.66048 14.0263 6.91053 14.2763C7.16057 14.5264 7.49971 14.6668 7.85333 14.6668H8.14667C8.50029 14.6668 8.83943 14.5264 9.08948 14.2763C9.33953 14.0263 9.48 13.6871 9.48 13.3335V13.2135C9.48024 12.9797 9.54196 12.75 9.65898 12.5476C9.77599 12.3452 9.94418 12.1771 10.1467 12.0602L10.4333 11.8935C10.636 11.7765 10.866 11.7149 11.1 11.7149C11.3341 11.7149 11.564 11.7765 11.7667 11.8935L11.8667 11.9468C12.1726 12.1233 12.5361 12.1712 12.8773 12.08C13.2186 11.9887 13.5096 11.7658 13.6867 11.4602L13.8333 11.2002C14.0098 10.8942 14.0577 10.5307 13.9665 10.1895C13.8752 9.84827 13.6523 9.5572 13.3467 9.38016L13.2467 9.32683C13.0432 9.20936 12.8744 9.04021 12.7573 8.8365C12.6402 8.6328 12.5791 8.40178 12.58 8.16683V7.8335C12.5791 7.59855 12.6402 7.36753 12.7573 7.16382C12.8744 6.96012 13.0432 6.79097 13.2467 6.6735L13.3467 6.6135C13.6523 6.43646 13.8752 6.14539 13.9665 5.80416C14.0577 5.46294 14.0098 5.09945 13.8333 4.7935L13.6867 4.54016C13.5096 4.23452 13.2186 4.01161 12.8773 3.92037C12.5361 3.82913 12.1726 3.877 11.8667 4.0535L11.7667 4.10683C11.564 4.22385 11.3341 4.28546 11.1 4.28546C10.866 4.28546 10.636 4.22385 10.4333 4.10683L10.1467 3.94016C9.94418 3.82325 9.77599 3.65515 9.65898 3.45272C9.54196 3.25029 9.48024 3.02065 9.48 2.78683V2.66683C9.48 2.31321 9.33953 1.97407 9.08948 1.72402C8.83943 1.47397 8.50029 1.3335 8.14667 1.3335Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M8 10.0002C9.10457 10.0002 10 9.10473 10 8.00016C10 6.89559 9.10457 6.00016 8 6.00016C6.89543 6.00016 6 6.89559 6 8.00016C6 9.10473 6.89543 10.0002 8 10.0002Z"
                stroke="white"
                stroke-width="1.33333"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </List>
        </ul>
      </nav>
    </aside>
  );
};

export default SideBar;
